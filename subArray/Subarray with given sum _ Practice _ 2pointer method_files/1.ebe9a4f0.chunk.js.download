(this.webpackJsonpcomments=this.webpackJsonpcomments||[]).push([[1],{107:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return u}));n(134),n(0);var r=n(1),a=function(){return Object(r.jsx)("div",{className:"shimmer-wrapper",children:Object(r.jsx)("div",{className:"shimmer"})})};var c=function(e){var t=e.type,n="skeleton ".concat(t);return Object(r.jsx)("div",{className:n,children:Object(r.jsx)(a,{})})};function o(e){for(var t=[],n=0;n<e;n++)n%2===0?t.push(Object(r.jsx)(c,{type:"genericLineStyles sm"})):t.push(Object(r.jsx)(c,{type:"genericLineStyles md"}));return t}function i(){return Object(r.jsx)(c,{type:"genericLineStyles lg"})}function s(e){return Object(r.jsxs)("div",{className:"d-flex w-100",children:[Object(r.jsx)(c,{type:"genericLineStyles ".concat(e.type)}),Object(r.jsx)("div",{className:"ml-2",children:Object(r.jsx)(c,{type:"genericLineStyles ".concat(e.type)})})]})}function u(){var e=[];e.push(i());for(var t=0;t<5;t++)e.push(Object(r.jsxs)("div",{className:"d-flex mt-5",children:[Object(r.jsx)("div",{className:"voteSectionSkeleton",children:Object(r.jsx)(c,{type:"genericBrickStyles md"})}),Object(r.jsxs)("div",{className:"bodySectionSkeleton",children:[o(5),Object(r.jsx)(s,{type:"btn-skeleton-sm"})]})]}));return e}},134:function(e,t,n){},46:function(e,t,n){"use strict";n.d(t,"g",(function(){return u})),n.d(t,"j",(function(){return l})),n.d(t,"h",(function(){return m})),n.d(t,"i",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return h})),n.d(t,"d",(function(){return g})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"a",(function(){return _}));var r=n(43),a=n.n(r),c=n(44),o=n(47),i=n(59),s=n.n(i);function u(e,t,n,r,a,c){return o.a.post("/comment/",{text:e,ancestry:t,post_id:r,domain:decodeURIComponent(n),post_url:a||"https://practice.geeksforgeeks.org",post_title:decodeURIComponent(c)}).then((function(e){return e})).catch((function(e){return Promise.reject(e)}))}function l(e,t,n,r,a){return o.a.put("/comment/".concat(n,"/"),{field:e,value:t,ancestry:r,domain:a}).then((function(e){return e})).catch((function(e){return Promise.reject(e)}))}function m(e,t){return o.a.post("/unspam_comment/".concat(e,"/"),{domain:t}).then((function(e){return e})).catch((function(e){return Promise.reject(e)}))}function d(e){return o.a.post("/undelete_comment/".concat(e,"/"),{}).then((function(e){return e})).catch((function(e){return e}))}function f(e,t,n,r,a,c,o){return p.apply(this,arguments)}function p(){return(p=Object(c.a)(a.a.mark((function e(t,n,r,c,i,s,u){var l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l={sort_by:t,ancestry:i,order_by:n},c&&Object.keys(c).length>0&&(l.last_evaluated_key=JSON.stringify(c)),s&&(l.fetch_by=s),u&&(l.domain=u),e.next=6,o.a.get("comment/".concat(r,"/"),{params:l}).then((function(e){return e})).catch((function(e){return Promise.reject(e)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("getUserInfo/",{}).then((function(e){return e})).catch((function(e){return Promise.reject(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return j.apply(this,arguments)}function j(){return(j=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.get("vote/",{params:{comment_id:t}}).then((function(e){return e})).catch((function(e){return Promise.reject(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t,n,r,a,c){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(a.a.mark((function e(t,n,r,c,i,u){var l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(l={domain:t,filter_by:n,order_by:r,last_evaluated_key:c}).from_timestamp=s()(i).format("YYYY-MM-DD HH:mm:ss"),l.to_timestamp=s()(u).format("YYYY-MM-DD HH:mm:ss"),e.next=5,o.a.get("filter_comment/",{params:l}).then((function(e){return e})).catch((function(e){return Promise.reject(e)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(a.a.mark((function e(t,n){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="/search_user/".concat(t,"/?domain=").concat(n),e.abrupt("return",o.a.get(r,{}).then((function(e){return e})).catch((function(e){return Promise.reject(e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return k.apply(this,arguments)}function k(){return(k=Object(c.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",o.a.get("total_comments_on_domain/".concat(t,"/"),{}).then((function(e){return e})).catch((function(e){return Promise.reject(e)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},47:function(e,t,n){"use strict";var r=n(114);var a=n.n(r).a.create({baseURL:"https://comment.geeksforgeeks.org/api/"});a.defaults.withCredentials=!0;t.a=a},49:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var r=n(67),a=(n(63),n(1));r.a.configure();var c=function(e){return r.a.success(Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:e}}),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0})},o=function(e,t){r.a.error(e?Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:e}}):"Oops! something went wrong",{toastId:t})}},54:function(e,t,n){"use strict";var r=n(1);t.a=function(e){return Object(r.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show errorMessage p-4 d-flex flex-row align-items-center justify-content-center",role:"alert","data-dismiss":"alert","aria-label":"Close",children:[Object(r.jsx)("p",{children:e.errorMessage}),Object(r.jsx)("button",{type:"button",className:"close p-0 position-relative ml-3","data-dismiss":"alert","aria-label":"Close",onClick:function(){e.handleErrorClose()},children:Object(r.jsx)("span",{"aria-hidden":"true",children:"\xd7"})})]})}},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(43),a=n.n(r),c=n(44),o=n(42),i=n(0),s=n(147),u=n(107),l=n(49),m=n(46),d=n(1),f=[{text:"HTML",value:"markup"},{text:"CSS",value:"css"},{text:"JavaScript",value:"javascript"},{text:"C",value:"c"},{text:"C++",value:"cpp"},{text:"C#",value:"csharp"},{text:"Java",value:"java"},{text:"Python",value:"python"},{text:"Scala",value:"scala"},{text:"PHP",value:"php"},{text:"Perl",value:"perl"}];function p(e){var t,n=e.plugins,r=e.toolbar,a=e.imageUploadHandler,c=e.onEditorChange,p=e.height,h=e.maxHeight,b=e.getRawData,g=e.onReady,j=e.domainName,v=e.commentData,x=new URLSearchParams(window.location.search).get("mode"),y=Object(i.useRef)(null),O=Object(i.useState)(!0),_=Object(o.a)(O,2),k=_[0],w=_[1],S=p||100,C=function(e){e.ui.registry.addAutocompleter("mentions",{ch:"@",minChars:3,columns:1,onAction:function(t,n,r){e.selection.setRng(n);var a='<a class="mention" contenteditable="false" data-mention="@'+r+'" href="https://auth.geeksforgeeks.org/user/'+r+'/">@'+r+"</a>&nbsp;";e.insertContent(a),t.hide()},fetch:function(e){return new Promise((function(n){!function(e,n,r){clearTimeout(t),new Promise((function(a){t=setTimeout((function(){Object(m.e)(e,n).then((function(e){r(e.data)})).catch((function(e){return console.log(e),Promise.reject(e)}))}),500)}))}(e,j,(function(e){var t=e.map((function(e){return{type:"autocompleteitem",value:e,text:e}}));n(t)}))}))}})};return Object(d.jsxs)(d.Fragment,{children:[k&&Object(d.jsx)(u.b,{}),Object(d.jsx)("div",{style:k?{display:"none"}:{display:"block"},children:Object(d.jsx)(s.a,{apiKey:"lfz1rfxp6uedq2ins0xxjmmimxuffa1y2opq3la0egsxutiz",onInit:function(e,t){w(!1),y.current=t,g(y.current)},value:v,init:{mode:"textareas",paste_auto_cleanup_on_paste:!0,paste_preprocess:function(e,t){var n=(new DOMParser).parseFromString(t.content,"text/html");n.body.querySelectorAll("*").forEach((function(e){e.classList=[]})),t.content=n.body.innerHTML.replaceAll('class=""',"")},height:p,menubar:!1,branding:!1,statusbar:!1,resize:!0,plugins:n,toolbar:r,mobile:{toolbar_mode:"wrap"},toolbar_groups:{headinggroup:{icon:"format",tooltip:"Heading format",items:"h1 h2 h3 h4 h5 h6"}},autoresize_bottom_margin:0,max_height:h,min_height:S,codesample_languages:f,images_upload_credentials:!0,default_link_target:"_blank",target_list:!1,skin:"dark"===x?"oxide-dark":"",content_css:"dark"===x?"dark":"",setup:function(e){a&&function(e){e.ui.registry.addButton("customimageupload",{icon:"image",tooltip:"Insert Image",onAction:function(){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("multiple",!0),t.setAttribute("accept","image/png, image/jpeg"),t.addEventListener("change",(function(){null!=t.files&&t.files.length>0&&Object.keys(t.files).forEach((function(n){var r=new FileReader;r.onload=function(n){n.target.result.includes("data:image/")?(e.insertContent('<img style="display: block;" src="'.concat(n.target.result,"\" height='100'>")),t.value=""):Object(l.a)("Failed to upload image.")},r.readAsDataURL(t.files[n])}))})),t.click()}})}(e),C(e),e.on("BeforeExecCommand",(function(t){var n;"mceInsertContent"===t.command&&"string"===typeof(null===t||void 0===t?void 0:t.value)&&(null===t||void 0===t||null===(n=t.value)||void 0===n?void 0:n.includes('<pre id="__new" class="language'))&&(t.preventDefault(),e.insertContent("".concat(null===t||void 0===t?void 0:t.value.replace('id="__new"',""),"<p></p>")))}))},images_upload_handler:function(e,t,n){a&&a(e,t,n)}},onEditorChange:function(e,t){var n=t.getContent({format:"text"});c(b?t.getContent({format:"raw"}):t.getContent(),n)}})})]})}var h=n(47),b={backgroundColor:"#2F8D46"},g={fontFamily:"urw-din",fontSize:"16px",color:"#262932"},j={width:"36px",height:"36px"};function v(e){var t=e.saveComment,n=e.closeEditor,r=Object(i.useState)(!1),s=Object(o.a)(r,2),u=s[0],m=s[1],f=Object(i.useState)(e.userData),v=Object(o.a)(f,2),x=v[0],y=v[1],O=Object(i.useState)(),_=Object(o.a)(O,2),k=_[0],w=_[1],S=Object(i.useState)(!1),C=Object(o.a)(S,2),N=C[0],P=C[1],D=Object(i.useState)(""),L=Object(o.a)(D,2),H=L[0],E=L[1];Object(i.useEffect)((function(){E(e.commentData)}),[e.commentData]);function I(){return(I=Object(c.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(H.length>=1e4)){n.next=4;break}return Object(l.a)("Comment size is too big!"),m(!0),n.abrupt("return");case 4:return P(!0),n.next=7,t(H);case 7:n.sent&&(k.resetContent(),localStorage.removeItem(e.localStorageKey),E("")),P(!1);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(i.useEffect)((function(){y(e.userData)}),[e.userData]),Object(i.useEffect)((function(){m(e.disableSubmit)}),[e.disableSubmit]),Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("section",{children:Object(d.jsxs)("div",{className:"mt-3 ml-15 mr-15",children:[Object(d.jsx)(p,{onReady:function(e){w(e)},commentData:H,onEditorChange:function(t,n){e.localStorageKey&&!t?localStorage.removeItem(e.localStorageKey):e.localStorageKey&&t&&localStorage.setItem(e.localStorageKey,t),E(t),t.includes("<img")||n.trim().length?m(!1):m(!0)},plugins:"bold italic underline strikethrough link lists blockquote insertfile customimageupload undo redo codesample autoresize superscript subscript table",toolbar:"headinggroup | bold italic underline strikethrough | link codesample customimageupload blockquote | bullist numlist | undo redo | table",imageUploadHandler:function(e,t,n){if(e.blob().size/1e3>2e3)n("Maximum image upload size is: 2 MB",{remove:!0});else{P(!0);var r=new FormData;r.append("image",e.blob(),e.filename()),h.a.post("/upload_image/",r,{headers:{"Content-Type":"multipart/form-data;"}}).then((function(e){var r,a;e.data.status?t(null===(r=e.data)||void 0===r?void 0:r.url):n(null===(a=e.data)||void 0===a?void 0:a.message,{remove:!0}),P(!1)})).catch((function(e){var t=e.response.data.message||"Upload failed";n(t,{remove:!0}),P(!1)}))}},maxheight:e.maxheight,height:e.height,domainName:e.domain}),Object(d.jsxs)("div",{className:"d-flex mt-3 mx-0",children:[Object(d.jsx)("div",{className:"col-sm-6 d-none d-sm-block p-0",children:Object(d.jsxs)("div",{className:"d-flex align-items-center mx-0",children:[Object(d.jsx)("div",{className:"",children:Object(d.jsx)("img",{style:j,className:"rounded-circle img-fluid",src:x.profile_image_url,alt:"avatar"})}),Object(d.jsx)("div",{className:"ml-2 curr-user-name",children:Object(d.jsxs)("span",{style:g,className:"text-secondary sofia-pro float-left",children:["Commenting as: ",x.handle," "]})})]})}),Object(d.jsxs)("div",{className:"col-sm-6 px-0",children:[Object(d.jsx)("button",{disabled:!H||u||(null===H||void 0===H?void 0:H.includes('<img src="data:'))||N,style:b,onClick:function(){!function(){I.apply(this,arguments)}()},className:"btn btn-sm btn-success float-right sofia-pro h-100",children:N?"Loading...":"Submit"}),e.cancel&&Object(d.jsx)("button",{onClick:function(){n()},className:"btn btn-sm btn-secondary btn-blue float-right sofia-pro mr-2 h-100",children:"Cancel"})]})]})]})})})}},73:function(e,t,n){},91:function(e,t,n){}}]);
//# sourceMappingURL=1.ebe9a4f0.chunk.js.map